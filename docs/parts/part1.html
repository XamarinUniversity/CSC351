<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
    <title>Explore an unresponsive app</title>
    <link rel="stylesheet" type="text/css" href="./res/styles/normalize.css">
    <link rel="stylesheet" type="text/css" href="./res/styles/prettify.css" />
    <link rel="stylesheet" type="text/css" href="./res/styles/styles.css">
</head>

<body>
    <!-- Use the same title as the StartHere -->
    <header>Writing multithreaded mobile applications</header>

    <section id="main">

        <h1 id="page-title"></h1>

        <h2>Duration</h2>
        <p>5 minutes</p>

        <h2>Goals</h2>

        <p>
            The primary goal of this lab is to explore an existing unresponsive application and examine the code that is preventing the UI thread from responding to user interactions.
        </p>

        <img src="res/images/Ex1_complete.png" class="center" style="border:1px solid #999999"/>
      
        <h2>Required assets</h2>
        <p>
            The provided <strong>Exercise 1</strong> folder contains a sub-folder named <strong>Start</strong> which contains the project that we will examine. Please make sure you have this folder before you begin.
        </p>

        <!-- Give them a challenge here, high-level steps of what we want them to do
             so they can use this instead of the step-by-step (baby steps) included below -->
        <h2>Steps</h2>
        <ol>
            <li>Open the <b>FractlExplorer.sln</b> solution and run the application on one platform.</li>
            <li>Try dragging the fractal image on screen. Is it responsive? The Text at the bottom of the display shows the time taken to generate and display the fractal.</li>
            <li>If you're interested in exploring the fractal specific code, open the <b>Utility</b> folder in the <b>FractlExplorer</b> PCL project.  We won't be modifying this code in this class.</li>
            <li>Open <b>MainPage.xaml</b>, the <code>Image</code> <b>imageHost</b> is used to display the fractal.  Notice two gestures have been added to the <code>Image</code>. </li>
            <li>Open <b>MainPage.xaml.cs</b>; this class is responsible for managing the fractal image generation.  We'll be working primarily in this file.</li>
            <li>Scroll to <code>StartRender</code>; this method is called by the gestures and itself calls the <code>GenerateFractl</code> method.</li>
            <li>Scroll to <code>GenerateFractl</code>; this method instantiates the <b>Mandelbrot</b> generator and copies the fractal data into the <b>memoryBuffer</b> <code>int</code> array field.</li>
            <li>Scroll to <code>RefreshScreen</code>; this method calls platform specific code to convert <b>memoryBuffer</b> to an <code>ImageSource</code> that can be displayed in <b>imageHost</b> to display the fractal.</li>
            <li>Notice that all of this code is currently being called synchronously.  What parts of this code do you think are responsible for the long pauses during updates? We'll be modifying this code in the following exercises to improve both responsiveness and performance.</li>
        </ol>

<p>
<a href="#" onclick="toggleBlock(this, 'Answer', 'Answer', 'Hide'); return false;" class="uiitem">Show Answer</a>
<div class="hintblock" id="Answer" style="display:none;">
The <code>GenerateFractl</code> method is using the <code>Mandelbrot</code> class, which uses a mathematically intensive, and processor intensive algorithm to generate the fractal data. The <code>RefreshScreen</code> method converts the fractal data to an <code>ImageSource</code> to be visualized.  This is a CPU-intensive operation, although less-so than generating the fractal. 
</div></p>

        <h1>Summary</h1>
        <p>
            In this exercise you explored an application that does not respond to user interactions when updating.  
        </p>
        <div class="align-right">
            <a href="../Start%20Here.html">Go Back</a>
        </div>
    </section>

    <script src="./res/js/jquery.min.js"></script>
    <script src="./res/js/prettify.js"></script>
    <script src="./res/js/script.js"></script>

    <footer>Copyright (C) 2018 Xamarin Inc., Microsoft.</footer>
</body>
</html>
